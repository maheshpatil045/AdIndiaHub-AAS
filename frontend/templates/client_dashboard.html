<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<title>Client Dashboard - AdIndiaHub</title>

<style>
body{
    margin:0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(120deg,#0f172a,#1e293b);
    color:white;
}

/* NAVBAR */
.navbar{
    background:#020617;
    padding:15px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 20px rgba(0,0,0,0.4);
}

.navbar h2{
    color:#38bdf8;
}

.nav-btn{
    color:white;
    margin-left:20px;
    text-decoration:none;
    font-weight:bold;
}

.nav-btn:hover{
    color:#38bdf8;
}

/* MAIN */
.container{
    padding:30px;
    max-width:1400px;
    margin:auto;
}

/* CARDS */
.cards{
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap:25px;
}

.card{
    background:rgba(255,255,255,0.05);
    padding:25px;
    border-radius:15px;
    backdrop-filter:blur(10px);
    box-shadow:0 10px 25px rgba(0,0,0,0.5);
    transition:0.3s;
}

.card:hover{
    transform:translateY(-8px);
    box-shadow:0 15px 40px rgba(56,189,248,0.4);
}

.card h3{
    color:#38bdf8;
}

.card a{
    display:inline-block;
    margin-top:12px;
    padding:10px 18px;
    background:#38bdf8;
    color:black;
    border-radius:6px;
    text-decoration:none;
    font-weight:bold;
}

.card a:hover{
    background:#0ea5e9;
}

/* TABLE */
h3{
    color:#38bdf8;
}

table{
    width:100%;
    margin-top:30px;
    border-collapse:collapse;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(10px);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 5px 20px rgba(0,0,0,0.4);
}

th,td{
    padding:14px;
    border-bottom:1px solid rgba(255,255,255,0.1);
    text-align:center;
}

th{
    background:#020617;
    color:#38bdf8;
}

tr:hover{
    background:rgba(56,189,248,0.1);
}

/* STATUS */
.active{ color:#22c55e; font-weight:bold;}
.pending{ color:#facc15; font-weight:bold;}
.rejected{ color:#ef4444; font-weight:bold;}

/* DELETE BTN */
.btn-delete{
    background:#ef4444;
    padding:7px 14px;
    color:white;
    text-decoration:none;
    border-radius:6px;
    display:inline-block;
}

.btn-delete:hover{
    background:#dc2626;
}

/* VIDEO */
video{
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.2);
}

/* STAR RATING FIX */
.stars {
    display:flex;
    flex-direction:row-reverse;
    justify-content:center;
}

.stars input {
    display:none;
}

.stars label {
    font-size:22px;
    color:#555;
    cursor:pointer;
    transition:0.2s;
}

/* Highlight selected stars */
.stars input:checked ~ label,
.stars label:hover,
.stars label:hover ~ label {
    color:gold;
}

textarea{
    width:100%;
    margin-top:8px;
    border-radius:6px;
    border:none;
    padding:6px;
    font-size:12px;
}

.feedback-btn{
    margin-top:8px;
    padding:6px 10px;
    background:#38bdf8;
    border:none;
    color:black;
    font-weight:bold;
    border-radius:6px;
    cursor:pointer;
}

.feedback-btn:hover{
    background:#0ea5e9;
}

</style>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
    <h2> Marketing Dashboard</h2>
    <div>
        <a href="/client-profile" class="nav-btn"><i class="fa fa-user"></i> Profile</a>
        <a href="/logout" class="nav-btn"><i class="fa fa-sign-out-alt"></i> Logout</a>
    </div>
</div>

<div class="container">

<!-- DASHBOARD CARDS -->
<div class="cards">

    <div class="card">
        <h3>Request New Campaign</h3>
        <p>Send new marketing campaign request.</p>
        <a href="/request-campaign">Create Campaign</a>
    </div>

    <div class="card">
        <h3>My Campaign Requests</h3>
        <p>Track approval status.</p>
        <a href="/my-campaign-requests">View Requests</a>
    </div>

    <div class="card">
        <h3>Active Campaigns</h3>
        <p>View running ads performance.</p>
        <a href="/client-dashboard">View Campaigns</a>
    </div>

</div>

<!-- ACTIVE CAMPAIGNS TABLE -->
<h3 style="margin-top:40px;">My Active Campaigns</h3>

<table>
<tr>
    <th>Campaign</th>
    <th>Platform</th>
    <th>Status</th>
    <th>Advertisement Video</th>
    <th> Feedback</th>
</tr>

{% for c in campaigns %}
<tr>
    <td>{{ c.campaign_name }}</td>
    <td>{{ c.platform }}</td>
    <td class="{{ c.status|lower }}">{{ c.status }}</td>

    <!-- VIDEO COLUMN -->
    <td>
        {% if c.ad_video %}
        <video width="220" controls>
            <source src="{{ url_for('static', filename='ads_videos/' + c.ad_video) }}">
        </video>
        {% else %}
        <span style="color:red;">No Video Assigned</span>
        {% endif %}
        <br><br>

        <a href="{{ url_for('delete_my_campaign', campaign_id=c.campaign_id) }}"
        onclick="return confirm('Delete this campaign video?')"
        class="btn-delete">Delete</a>
    </td>

    <!-- FEEDBACK COLUMN -->
    <td>
        <div class="feedback-box">
            <form action="/submit-feedback" method="POST">

                <input type="hidden" name="campaign_id" value="{{ c.campaign_id }}">

                <!-- STAR RATING -->
                <div class="stars">
                    <input type="radio" id="star5{{c.campaign_id}}" name="stars" value="5"><label for="star5{{c.campaign_id}}">★</label>
                    <input type="radio" id="star4{{c.campaign_id}}" name="stars" value="4"><label for="star4{{c.campaign_id}}">★</label>
                    <input type="radio" id="star3{{c.campaign_id}}" name="stars" value="3"><label for="star3{{c.campaign_id}}">★</label>
                    <input type="radio" id="star2{{c.campaign_id}}" name="stars" value="2"><label for="star2{{c.campaign_id}}">★</label>
                    <input type="radio" id="star1{{c.campaign_id}}" name="stars" value="1"><label for="star1{{c.campaign_id}}">★</label>
                </div>

                <!-- COMMENT -->
                <textarea name="comment" rows="2" placeholder="Write feedback..."></textarea>

                <button type="submit" class="feedback-btn">Submit</button>
            </form>
        </div>
    </td>

</tr>
{% endfor %}

</table>

</div>

</body>
</html>
